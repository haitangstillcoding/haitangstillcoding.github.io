import{_ as s,o as a,c as n,R as i}from"./chunks/framework.gZp3ZZFg.js";const u=JSON.parse('{"title":"2020年最后一次登录","description":"","frontmatter":{"hidden":true,"recommend":false,"date":"2023-12-26T16:00:00.000Z"},"headers":[],"relativePath":"blog/leetcode/database/simple/2020年最后一次登录.md","filePath":"blog/leetcode/database/simple/2020年最后一次登录.md","lastUpdated":1703584971000}'),p={name:"blog/leetcode/database/simple/2020年最后一次登录.md"},e=i(`<h1 id="_2020年最后一次登录" tabindex="-1">2020年最后一次登录 <a class="header-anchor" href="#_2020年最后一次登录" aria-label="Permalink to &quot;2020年最后一次登录&quot;">​</a></h1><p>表: <code>Logins</code></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>+----------------+----------+</span></span>
<span class="line"><span>| 列名           | 类型      |</span></span>
<span class="line"><span>+----------------+----------+</span></span>
<span class="line"><span>| user_id        | int      |</span></span>
<span class="line"><span>| time_stamp     | datetime |</span></span>
<span class="line"><span>+----------------+----------+</span></span>
<span class="line"><span>(user_id, time_stamp) 是这个表的主键(具有唯一值的列的组合)。</span></span>
<span class="line"><span>每一行包含的信息是user_id 这个用户的登录时间。</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>编写解决方案以获取在 <code>2020</code> 年登录过的所有用户的本年度 <strong>最后一次</strong> 登录时间。结果集 <strong>不</strong> 包含 <code>2020</code> 年没有登录过的用户。</p><p>返回的结果集可以按 <strong>任意顺序</strong> 排列。</p><p>返回结果格式如下例。</p><p><strong>示例 1:</strong></p><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span>输入：</span></span>
<span class="line"><span>Logins 表:</span></span>
<span class="line"><span>+---------+---------------------+</span></span>
<span class="line"><span>| user_id | time_stamp          |</span></span>
<span class="line"><span>+---------+---------------------+</span></span>
<span class="line"><span>| 6       | 2020-06-30 15:06:07 |</span></span>
<span class="line"><span>| 6       | 2021-04-21 14:06:06 |</span></span>
<span class="line"><span>| 6       | 2019-03-07 00:18:15 |</span></span>
<span class="line"><span>| 8       | 2020-02-01 05:10:53 |</span></span>
<span class="line"><span>| 8       | 2020-12-30 00:46:50 |</span></span>
<span class="line"><span>| 2       | 2020-01-16 02:49:50 |</span></span>
<span class="line"><span>| 2       | 2019-08-25 07:59:08 |</span></span>
<span class="line"><span>| 14      | 2019-07-14 09:00:00 |</span></span>
<span class="line"><span>| 14      | 2021-01-06 11:59:59 |</span></span>
<span class="line"><span>+---------+---------------------+</span></span>
<span class="line"><span>输出：</span></span>
<span class="line"><span>+---------+---------------------+</span></span>
<span class="line"><span>| user_id | last_stamp          |</span></span>
<span class="line"><span>+---------+---------------------+</span></span>
<span class="line"><span>| 6       | 2020-06-30 15:06:07 |</span></span>
<span class="line"><span>| 8       | 2020-12-30 00:46:50 |</span></span>
<span class="line"><span>| 2       | 2020-01-16 02:49:50 |</span></span>
<span class="line"><span>+---------+---------------------+</span></span>
<span class="line"><span>解释：</span></span>
<span class="line"><span>6号用户登录了3次，但是在2020年仅有一次，所以结果集应包含此次登录。</span></span>
<span class="line"><span>8号用户在2020年登录了2次，一次在2月，一次在12月，所以，结果集应该包含12月的这次登录。</span></span>
<span class="line"><span>2号用户登录了2次，但是在2020年仅有一次，所以结果集应包含此次登录。</span></span>
<span class="line"><span>14号用户在2020年没有登录，所以结果集不应包含。</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="方法一-year" tabindex="-1">方法一：year <a class="header-anchor" href="#方法一-year" aria-label="Permalink to &quot;方法一：year&quot;">​</a></h2><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user_id,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(time_stamp) last_stamp</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Logins</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    year</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(time_stamp) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2020</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">group by</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user_id</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="方法二-timediff" tabindex="-1">方法二：timediff <a class="header-anchor" href="#方法二-timediff" aria-label="Permalink to &quot;方法二：timediff&quot;">​</a></h2><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user_id,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(time_stamp) last_stamp</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Logins</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    timediff(time_stamp, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2020-01-01 00:00:00&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    and</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> timediff(time_stamp, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2020-12-31 23:59:59&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">group by</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user_id</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="方法三-datediff" tabindex="-1">方法三：datediff <a class="header-anchor" href="#方法三-datediff" aria-label="Permalink to &quot;方法三：datediff&quot;">​</a></h2><p>注意：由于是比较日期，如果存在当天的数据，需用等号。</p><div class="language-sql vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sql</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">select</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user_id,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    max</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(time_stamp) last_stamp</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    Logins</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">where</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    datediff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(time_stamp, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2020-01-01 00:00:00&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    and</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> datediff</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(time_stamp, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;2020-12-31 23:59:59&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">group by</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    user_id</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div>`,15),l=[e];function r(t,h,c,d,k,b){return a(),n("div",null,l)}const o=s(p,[["render",r]]);export{u as __pageData,o as default};
